<!DOCTYPE html>
<html lang="ja"><meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="A layout example with a side menu that hides on mobile, just like the Pure website.">
<title>ざる魂</title>

<link rel="stylesheet" href="https://unpkg.com/purecss@1.0.0/build/pure-min.css" integrity="sha384-" crossorigin="anonymous">





     <link rel="stylesheet" href="/css/layouts/side-menu.css">

     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/3.0.1/github-markdown.min.css">
<body>
        <div id="layout">
<a href="#menu" id="menuLink" class="menu-link">
    
    <span></span>
</a>

<div id="menu">
    <div class="pure-menu">
        <a class="pure-menu-heading" href="/">ホーム</a>
        <a class="pure-menu-heading" href="/search">全文検索</a>
        
<h4>タグ</h4>
        <ul>
            <li><a href="/tags/android">android</a> (1)
            <li><a href="/tags/awk">awk</a> (1)
            <li><a href="/tags/clojure">clojure</a> (6)
            <li><a href="/tags/cygwin">cygwin</a> (6)
            <li><a href="/tags/emacs">emacs</a> (13)
            <li><a href="/tags/evil">evil</a> (1)
            <li><a href="/tags/find">find</a> (1)
            <li><a href="/tags/firefox">firefox</a> (2)
            <li><a href="/tags/game">game</a> (1)
            <li><a href="/tags/git">git</a> (1)
            <li><a href="/tags/java">java</a> (4)
            <li><a href="/tags/jvm">jvm</a> (2)
            <li><a href="/tags/keyboard">keyboard</a> (1)
            <li><a href="/tags/libgdx">libgdx</a> (6)
            <li><a href="/tags/linux">linux</a> (3)
            <li><a href="/tags/misaki">misaki</a> (2)
            <li><a href="/tags/org">org</a> (1)
            <li><a href="/tags/processing">processing</a> (1)
            <li><a href="/tags/skk">skk</a> (2)
            <li><a href="/tags/stack">stack</a> (10)
            <li><a href="/tags/sudo">sudo</a> (1)
            <li><a href="/tags/thinkpad">thinkpad</a> (1)
            <li><a href="/tags/tmux">tmux</a> (2)
            <li><a href="/tags/ubuntu">ubuntu</a> (5)
            <li><a href="/tags/vim">vim</a> (1)
            <li><a href="/tags/windows">windows</a> (4)
            <li><a href="/tags/xmonad">xmonad</a> (2)
        </ul>
<h4>セクション</h4>
<ul>
  
    <li><a href="/libgdx_basic/">Libgdx_basics</a>
  
    <li><a href="/post/">Posts</a>
  
    <li><a href="/install/">Installs</a>
  
    <li><a href="/search/">Searches</a>
  
</ul>
    </div>
</div>
<div id="main" class="markdown-body">
<div class="content">
<section id="main">
  <h1 id="title">4clojureを解いていく記事</h1>

<aside id="meta">
    <div>
    <section>
      <h5 id="date">作成日: 2014-01-14 </h5>
      <h5 id="date">最終更新日: 2019-11-09 </h5>
      <h5 id="wordcount"> 4173 文字 </h5>
    </section>
    
    <h5>tags</h5>
  <ul class="tags"><li><a href="/tags/clojure">clojure</a></ul>

</div>
</aside>
  <div>
        <article id="content">
           

<div class="ox-hugo-toc toc">
<div></div>

<div class="heading">&#30446;&#27425;</div>

<ul>
<li><a href="#a-nil-key-難しい">A nil key【難しい】</a></li>
<li><a href="#for-the-win-forの使いかた">For the win 【forの使いかた】</a></li>
<li><a href="#logical-falsity-and-truth-真偽について">Logical falsity and truth【真偽について】</a></li>
<li><a href="#subset-and-superset-重量">Subset and Superset【重量】</a></li>
<li><a href="#map-defaults">Map Defaults</a></li>
<li><a href="#lists-conj-重要">Lists: conj【重要】</a></li>
<li><a href="#intro-to-vectors-重要">Intro to Vectors【重要】</a></li>
<li><a href="#vectors-conj-重要">Vectors :conj【重要】</a></li>
<li><a href="#intro-to-sets-重要">Intro to Sets【重要】</a></li>
<li><a href="#sets-conj-重要">Sets: conj【重要】</a></li>
<li><a href="#intro-to-maps">Intro to Maps</a></li>
<li><a href="#maps-conj">Maps: conj</a></li>
<li><a href="#intro-to-sequences">Intro to Sequences</a></li>
<li><a href="#sequences-rest">Sequences: rest</a></li>
<li><a href="#intro-to-functions-重要">Intro to Functions【重要】</a></li>
<li><a href="#double-down">Double Down</a></li>
<li><a href="#hello-world">Hello World</a></li>
<li><a href="#sequences-map-重要">Sequences: map【重要】</a></li>
<li><a href="#sequences-filter-重要">Sequences: filter【重要】</a></li>
<li><a href="#35-local-bindings">#35 Local bindings</a></li>
<li><a href="#37-regular-expressions">#37 Regular Expressions</a></li>
<li><a href="#64-intro-to-reduce">#64 Intro to Reduce</a></li>
<li><a href="#57-simple-recursion-難しい">#57 Simple Recursion【難しい】</a></li>
<li><a href="#s-71-rearranging-code-重要">S#71 Rearranging Code: -&gt;【重要】</a></li>
<li><a href="#68-recurring-theme">#68 Recurring Theme</a></li>
<li><a href="#s-72-rearranging-code-重要">S#72 Rearranging Code: -&gt;&gt;【重要】</a></li>
<li><a href="#last-element-難しい">Last Element【難しい】</a></li>
<li><a href="#20-penultimate-element-難しい">#20 Penultimate Element【難しい】</a></li>
<li><a href="#21-nth-element-難しい">#21 Nth Element【難しい】</a></li>
</ul>

<p></div>
<!--endtoc--></p>

<ul>
<li>4clojureを解いていった過程を愚直にメモしておきます。</li>
<li>あとで見返して復習するためです。</li>
<li>基本的に時間のかかった問題と重要と思われるものだけ記述します。</li>
<li>この記事は随時更新してきます。</li>
</ul>

<h2 id="a-nil-key-難しい">A nil key【難しい】</h2>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">- #134
- Difficulty: Elementary
- Topics: maps

Write a function which, given a key and map, returns true iff the map
contains an entry with that key and its value is nil.

(true?  (__ :a {:a nil :b 2}))
(false? (__ :b {:a nil :b 2}))
(false? (__ :c {:a nil :b 2}))</code></pre></div>
<p>答</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure"><span style="color:#555">#</span>(<span style="color:#366">nil? </span>(<span style="color:#033">%2</span> <span style="color:#033">%1</span> <span style="color:#555">&#39;</span>()))</code></pre></div>
<p>経過</p>

<p>一瞬、マップをキーにして、値を取るようにすればいいと考えたけど</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure"><span style="color:#033">user&gt;</span> (<span style="color:#fc3">:b</span> {<span style="color:#fc3">:a</span> <span style="color:#033">nil</span> <span style="color:#fc3">:b</span> <span style="color:#f60">2</span>})
<span style="color:#f60">2</span></code></pre></div>
<p>外側のカッコの使いかたがわからん。次に思いついたのがget関数。でもこれは引数の位置が合わない。</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure"><span style="color:#033">user&gt;</span> (<span style="color:#366">get </span><span style="color:#fc3">:b</span> {<span style="color:#fc3">:a</span> <span style="color:#033">nil</span> <span style="color:#fc3">:b</span> <span style="color:#f60">2</span>})
<span style="color:#033">nil</span>
<span style="color:#033">user&gt;</span> (<span style="color:#366">get </span>{<span style="color:#fc3">:a</span> <span style="color:#033">nil</span> <span style="color:#fc3">:b</span> <span style="color:#f60">2</span>} <span style="color:#fc3">:b</span>)
<span style="color:#f60">2</span></code></pre></div>
<p>キーは第２引数にしないとnilが返ってきてしまうのでNG。そもそも問題分のiffの意味がわからないのでググル。</p>

<p>わかったこと。問題にあるiffとは「if and only  if」の略で同値のこと。</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">0 and 0 =&gt; true
0 and 1 =&gt; false
1 and 0 =&gt; false
1 and 1 =&gt; true</code></pre></div>
<p>true?,false?,nil?関数はiffの関数で完全に同値でないと真を返さない。</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure"><span style="color:#033">user&gt;</span> (<span style="color:#366">true? </span><span style="color:#033">true</span>)
<span style="color:#033">true</span>
<span style="color:#033">user&gt;</span> (<span style="color:#366">true? </span><span style="color:#f60">1</span>)
<span style="color:#033">false</span>
<span style="color:#033">user&gt;</span> (<span style="color:#366">true? </span><span style="color:#f60">2</span>)
<span style="color:#033">false</span>
<span style="color:#033">user&gt;</span> (<span style="color:#366">false? </span><span style="color:#033">nil</span>)
<span style="color:#033">false</span>
<span style="color:#033">user&gt;</span> (<span style="color:#366">false? </span><span style="color:#033">false</span>)
<span style="color:#033">true</span>
<span style="color:#033">user&gt;</span> (<span style="color:#366">false? </span><span style="color:#c30">&#34;&#34;</span>)
<span style="color:#033">false</span>
<span style="color:#033">user&gt;</span> (<span style="color:#366">nil? </span><span style="color:#033">nil</span>)
<span style="color:#033">true</span>
<span style="color:#033">user&gt;</span> (<span style="color:#366">nil? </span><span style="color:#033">false</span>)
<span style="color:#033">false</span>
<span style="color:#033">user&gt;</span> (<span style="color:#366">nil? </span><span style="color:#c30">&#34;&#34;</span>)
<span style="color:#033">false</span>
<span style="color:#033">user&gt;</span> (<span style="color:#366">nil? </span><span style="color:#555">&#39;</span>())
<span style="color:#033">false</span></code></pre></div>
<p>いろいろ指向錯誤した結果、即時呼び出しする無名関数を定義すれば良いと思いついた。</p>

<p>こんなやつ。</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure">(<span style="color:#555">#</span>(<span style="color:#366">str </span><span style="color:#033">%1</span> <span style="color:#033">%2</span>) <span style="color:#c30">&#34;Hello&#34;</span> <span style="color:#c30">&#34;World!&#34;</span>)</code></pre></div>
<p>似た記述をjavascriptで良くみますな。</p>

<p>この後いろいろ試す。</p>

<p>結構試行錯誤したうえでやっとできた。</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure"><span style="color:#033">user&gt;</span>  (<span style="color:#555">#</span>(<span style="color:#366">nil? </span>(<span style="color:#033">%2</span> <span style="color:#033">%1</span> <span style="color:#555">&#39;</span>())) <span style="color:#fc3">:a</span> {<span style="color:#fc3">:a</span> <span style="color:#033">nil</span> <span style="color:#fc3">:b</span> <span style="color:#f60">2</span>})
<span style="color:#033">true</span>
<span style="color:#033">user&gt;</span>  (<span style="color:#555">#</span>(<span style="color:#366">nil? </span>(<span style="color:#033">%2</span> <span style="color:#033">%1</span> <span style="color:#555">&#39;</span>())) <span style="color:#fc3">:b</span> {<span style="color:#fc3">:a</span> <span style="color:#033">nil</span> <span style="color:#fc3">:b</span> <span style="color:#f60">2</span>})
<span style="color:#033">false</span>
<span style="color:#033">user&gt;</span>  (<span style="color:#555">#</span>(<span style="color:#366">nil? </span>(<span style="color:#033">%2</span> <span style="color:#033">%1</span> <span style="color:#555">&#39;</span>())) <span style="color:#fc3">:c</span> {<span style="color:#fc3">:a</span> <span style="color:#033">nil</span> <span style="color:#fc3">:b</span> <span style="color:#f60">2</span>})
<span style="color:#033">false</span></code></pre></div>
<h2 id="for-the-win-forの使いかた">For the win 【forの使いかた】</h2>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">#145
Difficulty: Elementary
Topics: core-functions seqs

Clojure&#39;s for macro is a tremendously versatile mechanism
for producing a sequence based on some other sequence(s).
It can take some time to understand how to use it properly,
but that investment will be paid back with clear,
 concise sequence-wrangling later. With that in mind,
 read over these for expressions and try to see
how each of them produces the same result.</code></pre></div><div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure">(<span style="color:#366">= </span><span style="color:#033">__</span> (<span style="color:#366">for </span>[<span style="color:#033">x</span> (<span style="color:#366">range </span><span style="color:#f60">40</span>)
            <span style="color:#fc3">:when</span> (<span style="color:#366">= </span><span style="color:#f60">1</span> (<span style="color:#366">rem </span><span style="color:#033">x</span> <span style="color:#f60">4</span>))]
        <span style="color:#033">x</span>))

(<span style="color:#366">= </span><span style="color:#033">__</span> (<span style="color:#366">for </span>[<span style="color:#033">x</span> (<span style="color:#366">iterate </span><span style="color:#555">#</span>(<span style="color:#366">+ </span><span style="color:#f60">4</span> <span style="color:#033">%</span>) <span style="color:#f60">0</span>)
            <span style="color:#fc3">:let</span> [<span style="color:#033">z</span> (<span style="color:#366">inc </span><span style="color:#033">x</span>)]
            <span style="color:#fc3">:while</span> (<span style="color:#366">&lt; </span><span style="color:#033">z</span> <span style="color:#f60">40</span>)]
        <span style="color:#033">z</span>))

(<span style="color:#366">= </span><span style="color:#033">__</span> (<span style="color:#366">for </span>[[<span style="color:#033">x</span> <span style="color:#033">y</span>] (<span style="color:#033">partition</span> <span style="color:#f60">2</span> (<span style="color:#366">range </span><span style="color:#f60">20</span>))]
        (<span style="color:#366">+ </span><span style="color:#033">x</span> <span style="color:#033">y</span>)))</code></pre></div>
<p>答</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure">(<span style="color:#366">map inc </span>(<span style="color:#366">filter </span><span style="color:#555">#</span>(<span style="color:#366">= </span><span style="color:#f60">0</span> (<span style="color:#366">rem </span><span style="color:#033">%</span> <span style="color:#f60">4</span>)) (<span style="color:#366">range </span><span style="color:#f60">40</span>)))</code></pre></div>
<p>経過</p>

<p>forを読めば、どんなシーケンスを返すかは想像できるが単純にそのシーケンスを書くのは意味がない。</p>

<p>この問題は、下記の数列を考える問題。</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">0から開始して4の倍数に1足した数列を40未満まで出力する。
&#39;(1 5 9 13 17 21 25 29 33 37)</code></pre></div>
<p>でも実際forを読むことはできても、これと同じ挙動を捻りだすのは難題。</p>

<p>以下のような感じで作れた。</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure"><span style="color:#033">user&gt;</span> (<span style="color:#366">range </span><span style="color:#f60">40</span>)
(<span style="color:#f60">0</span> <span style="color:#f60">1</span> <span style="color:#f60">2</span> <span style="color:#f60">3</span> <span style="color:#f60">4</span> <span style="color:#f60">5</span> <span style="color:#f60">6</span> <span style="color:#f60">7</span> <span style="color:#f60">8</span> <span style="color:#f60">9</span> <span style="color:#f60">10</span> <span style="color:#f60">11</span> <span style="color:#f60">12</span> <span style="color:#f60">13</span> <span style="color:#f60">14</span> <span style="color:#f60">15</span> <span style="color:#f60">16</span> <span style="color:#f60">17</span> <span style="color:#f60">18</span> <span style="color:#f60">19</span> <span style="color:#f60">20</span> <span style="color:#f60">21</span> <span style="color:#f60">22</span> <span style="color:#f60">23</span> <span style="color:#f60">24</span> <span style="color:#f60">25</span> <span style="color:#f60">26</span> <span style="color:#f60">27</span> <span style="color:#f60">28</span> <span style="color:#f60">29</span> <span style="color:#f60">30</span> <span style="color:#f60">31</span> <span style="color:#f60">32</span> <span style="color:#f60">33</span> <span style="color:#f60">34</span> <span style="color:#f60">35</span> <span style="color:#f60">36</span> <span style="color:#f60">37</span> <span style="color:#f60">38</span> <span style="color:#f60">39</span>)
<span style="color:#033">user&gt;</span> (<span style="color:#366">filter </span><span style="color:#555">#</span>(<span style="color:#366">rem </span><span style="color:#033">%</span> <span style="color:#f60">4</span>) (<span style="color:#366">range </span><span style="color:#f60">40</span>))
(<span style="color:#f60">0</span> <span style="color:#f60">1</span> <span style="color:#f60">2</span> <span style="color:#f60">3</span> <span style="color:#f60">4</span> <span style="color:#f60">5</span> <span style="color:#f60">6</span> <span style="color:#f60">7</span> <span style="color:#f60">8</span> <span style="color:#f60">9</span> <span style="color:#f60">10</span> <span style="color:#f60">11</span> <span style="color:#f60">12</span> <span style="color:#f60">13</span> <span style="color:#f60">14</span> <span style="color:#f60">15</span> <span style="color:#f60">16</span> <span style="color:#f60">17</span> <span style="color:#f60">18</span> <span style="color:#f60">19</span> <span style="color:#f60">20</span> <span style="color:#f60">21</span> <span style="color:#f60">22</span> <span style="color:#f60">23</span> <span style="color:#f60">24</span> <span style="color:#f60">25</span> <span style="color:#f60">26</span> <span style="color:#f60">27</span> <span style="color:#f60">28</span> <span style="color:#f60">29</span> <span style="color:#f60">30</span> <span style="color:#f60">31</span> <span style="color:#f60">32</span> <span style="color:#f60">33</span> <span style="color:#f60">34</span> <span style="color:#f60">35</span> <span style="color:#f60">36</span> <span style="color:#f60">37</span> <span style="color:#f60">38</span> <span style="color:#f60">39</span>)
<span style="color:#033">user&gt;</span> (<span style="color:#366">filter </span><span style="color:#555">#</span>((<span style="color:#366">= </span><span style="color:#f60">0</span> (<span style="color:#366">rem </span><span style="color:#033">%</span> <span style="color:#f60">4</span>))) (<span style="color:#366">range </span><span style="color:#f60">40</span>))
<span style="color:#033">ClassCastException</span> <span style="color:#033">java.lang.Boolean</span> <span style="color:#033">cannot</span> <span style="color:#033">be</span> <span style="color:#366">cast </span><span style="color:#033">to</span> <span style="color:#033">clojure.lang.IFn</span>  <span style="color:#033">user/eval6704/fn--6705</span> (<span style="color:#033">NO_SOURCE_FILE</span><span style="color:#fc3">:1</span>)
<span style="color:#033">user&gt;</span> (<span style="color:#366">filter </span><span style="color:#555">#</span>((<span style="color:#366">not </span>(<span style="color:#366">rem </span><span style="color:#033">%</span> <span style="color:#f60">4</span>))) (<span style="color:#366">range </span><span style="color:#f60">40</span>))
<span style="color:#033">ClassCastException</span> <span style="color:#033">java.lang.Boolean</span> <span style="color:#033">cannot</span> <span style="color:#033">be</span> <span style="color:#366">cast </span><span style="color:#033">to</span> <span style="color:#033">clojure.lang.IFn</span>  <span style="color:#033">user/eval6851/fn--6852</span> (<span style="color:#033">NO_SOURCE_FILE</span><span style="color:#fc3">:1</span>)
<span style="color:#033">user&gt;</span> (<span style="color:#366">rem </span><span style="color:#f60">4</span> <span style="color:#f60">4</span>)
<span style="color:#f60">0</span>
<span style="color:#033">user&gt;</span> (<span style="color:#366">filter </span><span style="color:#555">#</span>(<span style="color:#366">= </span><span style="color:#f60">0</span> (<span style="color:#366">rem </span><span style="color:#033">%</span> <span style="color:#f60">4</span>)) (<span style="color:#366">range </span><span style="color:#f60">40</span>))
(<span style="color:#f60">0</span> <span style="color:#f60">4</span> <span style="color:#f60">8</span> <span style="color:#f60">12</span> <span style="color:#f60">16</span> <span style="color:#f60">20</span> <span style="color:#f60">24</span> <span style="color:#f60">28</span> <span style="color:#f60">32</span> <span style="color:#f60">36</span>)
<span style="color:#033">user&gt;</span> (<span style="color:#366">map inc </span>(<span style="color:#366">filter </span><span style="color:#555">#</span>(<span style="color:#366">= </span><span style="color:#f60">0</span> (<span style="color:#366">rem </span><span style="color:#033">%</span> <span style="color:#f60">4</span>)) (<span style="color:#366">range </span><span style="color:#f60">40</span>)))
(<span style="color:#f60">1</span> <span style="color:#f60">5</span> <span style="color:#f60">9</span> <span style="color:#f60">13</span> <span style="color:#f60">17</span> <span style="color:#f60">21</span> <span style="color:#f60">25</span> <span style="color:#f60">29</span> <span style="color:#f60">33</span> <span style="color:#f60">37</span>)</code></pre></div>
<h2 id="logical-falsity-and-truth-真偽について">Logical falsity and truth【真偽について】</h2>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">#152
Difficulty: Elementary
Topics: logic

In Clojure, only nil and false represent the values
 of logical falsity in conditional tests -
  anything else is logical truth.</code></pre></div><div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure">(<span style="color:#366">= </span><span style="color:#033">__</span> (<span style="color:#366">if-not </span><span style="color:#033">false</span> <span style="color:#f60">1</span> <span style="color:#f60">0</span>))
(<span style="color:#366">= </span><span style="color:#033">__</span> (<span style="color:#366">if-not </span><span style="color:#033">nil</span> <span style="color:#f60">1</span> <span style="color:#f60">0</span>))
(<span style="color:#366">= </span><span style="color:#033">__</span> (<span style="color:#069;font-weight:bold">if </span><span style="color:#033">true</span> <span style="color:#f60">1</span> <span style="color:#f60">0</span>))
(<span style="color:#366">= </span><span style="color:#033">__</span> (<span style="color:#069;font-weight:bold">if </span>[] <span style="color:#f60">1</span> <span style="color:#f60">0</span>))
(<span style="color:#366">= </span><span style="color:#033">__</span> (<span style="color:#069;font-weight:bold">if </span>[<span style="color:#f60">0</span>] <span style="color:#f60">1</span> <span style="color:#f60">0</span>))
(<span style="color:#366">= </span><span style="color:#033">__</span> (<span style="color:#069;font-weight:bold">if </span><span style="color:#f60">0</span> <span style="color:#f60">1</span> <span style="color:#f60">0</span>))
(<span style="color:#366">= </span><span style="color:#033">__</span> (<span style="color:#069;font-weight:bold">if </span><span style="color:#f60">1</span> <span style="color:#f60">1</span> <span style="color:#f60">0</span>))</code></pre></div>
<p>答</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure"><span style="color:#f60">1</span></code></pre></div>
<p>要点
clojureでは、falseとnilだけが偽。それ以外は全て真。</p>

<h2 id="subset-and-superset-重量">Subset and Superset【重量】</h2>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">#162
Difficulty: Elementary
Topics: set-theory

Set A is a subset of set B, or equivalently B is a superset of A,
 if A is &#34;contained&#34; inside B. A and B may coincide.</code></pre></div><div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure">(<span style="color:#033">clojure.set/superset?</span> <span style="color:#033">__</span> <span style="color:#555">#</span>{<span style="color:#f60">2</span>})
(<span style="color:#033">clojure.set/subset?</span> <span style="color:#555">#</span>{<span style="color:#f60">1</span>} <span style="color:#033">__</span>)
(<span style="color:#033">clojure.set/superset?</span> <span style="color:#033">__</span> <span style="color:#555">#</span>{<span style="color:#f60">1</span> <span style="color:#f60">2</span>})
(<span style="color:#033">clojure.set/subset?</span> <span style="color:#555">#</span>{<span style="color:#f60">1</span> <span style="color:#f60">2</span>} <span style="color:#033">__</span>)</code></pre></div>
<p>答</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure"><span style="color:#555">#</span>{<span style="color:#f60">1</span> <span style="color:#f60">2</span>}</code></pre></div>
<p>経過</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure"><span style="color:#033">user&gt;</span> (<span style="color:#033">clojure.set/subset?</span> <span style="color:#555">#</span>{<span style="color:#f60">1</span>} <span style="color:#555">#</span>{<span style="color:#f60">1</span> <span style="color:#f60">2</span>})
<span style="color:#033">true</span>
<span style="color:#033">user&gt;</span> (<span style="color:#033">clojure.set/superset?</span> <span style="color:#555">#</span>{<span style="color:#f60">1</span> <span style="color:#f60">2</span>} <span style="color:#555">#</span>{<span style="color:#f60">1</span> <span style="color:#f60">2</span>})
<span style="color:#033">true</span>
<span style="color:#033">user&gt;</span> (<span style="color:#033">clojure.set/superset?</span> <span style="color:#555">#</span>{<span style="color:#f60">1</span> <span style="color:#f60">2</span>} <span style="color:#555">#</span>{<span style="color:#f60">1</span> <span style="color:#f60">2</span>})
<span style="color:#033">true</span>
<span style="color:#033">user&gt;</span> (<span style="color:#033">clojure.set/subset?</span> <span style="color:#555">#</span>{<span style="color:#f60">1</span> <span style="color:#f60">2</span>} <span style="color:#555">#</span>{<span style="color:#f60">1</span> <span style="color:#f60">2</span>})
<span style="color:#033">true</span></code></pre></div>
<p>内容が同じ場合は、superset?もsubset?も真になる。</p>

<p>要点</p>

<p>Bの集合があり、その中にAの集合が含まれるとき、
BがAのsupersetとなり、AはBのsubsetとなる。</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">+---------+
| +-+     |
| |A| B   |
| +-+     |
+---------</code></pre></div>
<h2 id="map-defaults">Map Defaults</h2>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">Difficulty: Elementary
Topics: seqs
#156

When retrieving values from a map,
 you can specify default values in case the key is not found:

(= 2 (:foo {:bar 0, :baz 1} 2))

However, what if you want the map itself to contain
 the default values? Write a function which takes a default value
 and a sequence of keys and constructs a map.</code></pre></div><div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure">(<span style="color:#366">= </span>(<span style="color:#033">__</span> <span style="color:#f60">0</span> [<span style="color:#fc3">:a</span> <span style="color:#fc3">:b</span> <span style="color:#fc3">:c</span>]) {<span style="color:#fc3">:a</span> <span style="color:#f60">0</span> <span style="color:#fc3">:b</span> <span style="color:#f60">0</span> <span style="color:#fc3">:c</span> <span style="color:#f60">0</span>})
(<span style="color:#366">= </span>(<span style="color:#033">__</span> <span style="color:#c30">&#34;x&#34;</span> [<span style="color:#f60">1</span> <span style="color:#f60">2</span> <span style="color:#f60">3</span>]) {<span style="color:#f60">1</span> <span style="color:#c30">&#34;x&#34;</span> <span style="color:#f60">2</span> <span style="color:#c30">&#34;x&#34;</span> <span style="color:#f60">3</span> <span style="color:#c30">&#34;x&#34;</span>})
(<span style="color:#366">= </span>(<span style="color:#033">__</span> [<span style="color:#fc3">:a</span> <span style="color:#fc3">:b</span>] [<span style="color:#fc3">:foo</span> <span style="color:#fc3">:bar</span>]) {<span style="color:#fc3">:foo</span> [<span style="color:#fc3">:a</span> <span style="color:#fc3">:b</span>] <span style="color:#fc3">:bar</span> [<span style="color:#fc3">:a</span> <span style="color:#fc3">:b</span>]})</code></pre></div>
<p>答</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure"></code></pre></div>
<p>経過</p>

<p>キーからなる配列とひとつの値を指定してmapをつくる関数を考える問題。</p>

<h2 id="lists-conj-重要">Lists: conj【重要】</h2>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">#5
Difficulty: Elementary
Topics:

When operating on a list, the conj function will return
 a new list with one or more items &#34;added&#34; to the front.
test not run

(= __ (conj &#39;(2 3 4) 1))
test not run

(= __ (conj &#39;(3 4) 2 1))</code></pre></div>
<p>答</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure"><span style="color:#555">&#39;</span>(<span style="color:#f60">1</span> <span style="color:#f60">2</span> <span style="color:#f60">3</span> <span style="color:#f60">4</span>)</code></pre></div>
<p>conjは第２以降の引数を順番にlistの先頭にくっつけていく。複数の引数をフラットなリストにする感じ。</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure"><span style="color:#033">user&gt;</span> (<span style="color:#366">conj </span><span style="color:#555">&#39;</span>(<span style="color:#f60">2</span> <span style="color:#f60">3</span> <span style="color:#f60">4</span>) <span style="color:#f60">1</span>)
(<span style="color:#f60">1</span> <span style="color:#f60">2</span> <span style="color:#f60">3</span> <span style="color:#f60">4</span>)
<span style="color:#033">user&gt;</span> (<span style="color:#366">conj </span><span style="color:#555">&#39;</span>(<span style="color:#f60">3</span> <span style="color:#f60">4</span>) <span style="color:#f60">1</span> <span style="color:#f60">2</span>)
(<span style="color:#f60">2</span> <span style="color:#f60">1</span> <span style="color:#f60">3</span> <span style="color:#f60">4</span>)</code></pre></div>
<p>↑引数を左から順番に、先頭に追加していくことに注意。</p>

<p>一方、consは追加する要素は、第1引数にひとつだけとる。こちらも同様に先頭へ追加していく。</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure"><span style="color:#033">user&gt;</span> (<span style="color:#366">cons </span><span style="color:#f60">1</span> <span style="color:#555">&#39;</span>(<span style="color:#f60">2</span> <span style="color:#f60">3</span>))
(<span style="color:#f60">1</span> <span style="color:#f60">2</span> <span style="color:#f60">3</span>)
<span style="color:#033">user&gt;</span> (<span style="color:#366">cons </span><span style="color:#f60">1</span> <span style="color:#f60">2</span> <span style="color:#555">&#39;</span>(<span style="color:#f60">2</span> <span style="color:#f60">3</span>))
<span style="color:#09f;font-style:italic">; Evaluation aborted.</span></code></pre></div>
<h2 id="intro-to-vectors-重要">Intro to Vectors【重要】</h2>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">#6
Intro to VectorsSolutions
Difficulty: Elementary
Topics:
Vectors can be constructed several ways. You can compare them with lists.
test not run</code></pre></div><div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure">(<span style="color:#366">= </span>[<span style="color:#033">__</span>]
  (<span style="color:#366">list </span><span style="color:#fc3">:a</span> <span style="color:#fc3">:b</span> <span style="color:#fc3">:c</span>)
  (<span style="color:#033">vec</span> <span style="color:#555">&#39;</span>(<span style="color:#fc3">:a</span> <span style="color:#fc3">:b</span> <span style="color:#fc3">:c</span>))
  (<span style="color:#366">vector </span><span style="color:#fc3">:a</span> <span style="color:#fc3">:b</span> <span style="color:#fc3">:c</span>))</code></pre></div>
<p>答</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure"><span style="color:#fc3">:a</span> <span style="color:#fc3">:b</span> <span style="color:#fc3">:c</span></code></pre></div>
<p>リストをベクタに変換する</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure"><span style="color:#033">user&gt;</span> (<span style="color:#033">vec</span> <span style="color:#555">&#39;</span>(<span style="color:#fc3">:a</span> <span style="color:#fc3">:b</span> <span style="color:#fc3">:c</span>))
[<span style="color:#fc3">:a</span> <span style="color:#fc3">:b</span> <span style="color:#fc3">:c</span>]</code></pre></div>
<p>ベクタを作る</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure"><span style="color:#033">user&gt;</span> (<span style="color:#366">vector </span><span style="color:#fc3">:a</span> <span style="color:#fc3">:b</span> <span style="color:#fc3">:c</span>)
[<span style="color:#fc3">:a</span> <span style="color:#fc3">:b</span> <span style="color:#fc3">:c</span>]</code></pre></div>
<p>それぞれの返り値がベクタなので最初わからなかったが
REPLに入れたらtrueが帰ってきた！</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure"><span style="color:#033">user&gt;</span>  (<span style="color:#366">= </span>[<span style="color:#fc3">:a</span> <span style="color:#fc3">:b</span> <span style="color:#fc3">:c</span>] (<span style="color:#366">list </span><span style="color:#fc3">:a</span> <span style="color:#fc3">:b</span> <span style="color:#fc3">:c</span>) (<span style="color:#033">vec</span> <span style="color:#555">&#39;</span>(<span style="color:#fc3">:a</span> <span style="color:#fc3">:b</span> <span style="color:#fc3">:c</span>)) (<span style="color:#366">vector </span><span style="color:#fc3">:a</span> <span style="color:#fc3">:b</span> <span style="color:#fc3">:c</span>))
<span style="color:#033">true</span></code></pre></div>
<p>= 関数は中身だけ見るのね。</p>

<p>で、これを4clojureに回答しても、正解にならない。。。</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure">(<span style="color:#366">= </span>[<span style="color:#fc3">:a</span> <span style="color:#fc3">:b</span> <span style="color:#fc3">:c</span>] (<span style="color:#366">list </span><span style="color:#fc3">:a</span> <span style="color:#fc3">:b</span> <span style="color:#fc3">:c</span>) (<span style="color:#033">vec</span> <span style="color:#555">&#39;</span>(<span style="color:#fc3">:a</span> <span style="color:#fc3">:b</span> <span style="color:#fc3">:c</span>)) (<span style="color:#366">vector </span><span style="color:#fc3">:a</span> <span style="color:#fc3">:b</span> <span style="color:#fc3">:c</span>))</code></pre></div>
<p>REPLではtrueになるのになぜ？
 (= (lis &lsquo;(:a :b :c)) (list :a :b :c) (vec &lsquo;(:a :b :c)) (vector :a :b :c))</p>

<p>-&gt; 問題をよくみたらカギカッコが含まれていた。</p>

<p>「[___]」つまり「[:a :b :c]」のうち中身の「:a :b :c」だけを書けばよかった。だから下記であってたということ。</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure"><span style="color:#033">user&gt;</span>  (<span style="color:#366">= </span>[<span style="color:#fc3">:a</span> <span style="color:#fc3">:b</span> <span style="color:#fc3">:c</span>] (<span style="color:#366">list </span><span style="color:#fc3">:a</span> <span style="color:#fc3">:b</span> <span style="color:#fc3">:c</span>) (<span style="color:#033">vec</span> <span style="color:#555">&#39;</span>(<span style="color:#fc3">:a</span> <span style="color:#fc3">:b</span> <span style="color:#fc3">:c</span>)) (<span style="color:#366">vector </span><span style="color:#fc3">:a</span> <span style="color:#fc3">:b</span> <span style="color:#fc3">:c</span>))</code></pre></div>
<p>この問題でわかることは、ベクタには「&rsquo;」がいらないということ。</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure"><span style="color:#555">&#39;</span>[<span style="color:#033">a</span> <span style="color:#033">b</span> <span style="color:#033">c</span>]
<span style="color:#033">ではなくて</span>
[<span style="color:#033">a</span> <span style="color:#033">b</span> <span style="color:#033">c</span>]
<span style="color:#033">でよいとうこと</span><span style="color:#a00;background-color:#faa">。</span></code></pre></div>
<h2 id="vectors-conj-重要">Vectors :conj【重要】</h2>

<p>注意!ベクタの場合は、リストと違って後ろに追加されていく。</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure"><span style="color:#033">user&gt;</span> (<span style="color:#366">= </span>[<span style="color:#f60">1</span> <span style="color:#f60">2</span> <span style="color:#f60">3</span> <span style="color:#f60">4</span>] (<span style="color:#366">conj </span>[<span style="color:#f60">1</span> <span style="color:#f60">2</span> <span style="color:#f60">3</span>] <span style="color:#f60">4</span>))
<span style="color:#033">true</span>
<span style="color:#033">user&gt;</span> (<span style="color:#366">= </span>[<span style="color:#f60">1</span> <span style="color:#f60">2</span> <span style="color:#f60">3</span> <span style="color:#f60">4</span>] (<span style="color:#366">conj </span>[<span style="color:#f60">1</span> <span style="color:#f60">2</span>] <span style="color:#f60">3</span> <span style="color:#f60">4</span>))
<span style="color:#033">true</span></code></pre></div>
<h2 id="intro-to-sets-重要">Intro to Sets【重要】</h2>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure">(<span style="color:#366">= </span><span style="color:#033">__</span> (<span style="color:#366">set </span><span style="color:#555">&#39;</span>(<span style="color:#fc3">:a</span> <span style="color:#fc3">:a</span> <span style="color:#fc3">:b</span> <span style="color:#fc3">:c</span> <span style="color:#fc3">:c</span> <span style="color:#fc3">:c</span> <span style="color:#fc3">:c</span> <span style="color:#fc3">:d</span> <span style="color:#fc3">:d</span>)))
(<span style="color:#366">= </span><span style="color:#033">__</span> (<span style="color:#033">clojure.set/union</span> <span style="color:#555">#</span>{<span style="color:#fc3">:a</span> <span style="color:#fc3">:b</span> <span style="color:#fc3">:c</span>} <span style="color:#555">#</span>{<span style="color:#fc3">:b</span> <span style="color:#fc3">:c</span> <span style="color:#fc3">:d</span>}))</code></pre></div>
<p>とりあえずリテラルを書いてみる。</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure"><span style="color:#033">user&gt;</span> (<span style="color:#366">= </span><span style="color:#555">#</span>{<span style="color:#fc3">:a</span> <span style="color:#fc3">:a</span> <span style="color:#fc3">:b</span> <span style="color:#fc3">:c</span> <span style="color:#fc3">:c</span> <span style="color:#fc3">:c</span> <span style="color:#fc3">:c</span> <span style="color:#fc3">:d</span> <span style="color:#fc3">:d</span>} (<span style="color:#366">set </span><span style="color:#555">&#39;</span>(<span style="color:#fc3">:a</span> <span style="color:#fc3">:a</span> <span style="color:#fc3">:b</span> <span style="color:#fc3">:c</span> <span style="color:#fc3">:c</span> <span style="color:#fc3">:c</span> <span style="color:#fc3">:c</span> <span style="color:#fc3">:d</span> <span style="color:#fc3">:d</span>)))
<span style="color:#09f;font-style:italic">; Evaluation aborted.</span></code></pre></div>
<p>&hellip;うまくいかない。なぜアボートになるのか。。。そうかsetは値はユニークになるものだった。set関数の引数が非ユニークだからそのままリテラル書いたけどリテラルは当然setの仕様どおりに記述しなくちゃならないからユニークにしなくちゃだね。</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure"><span style="color:#033">user&gt;</span> (<span style="color:#366">= </span><span style="color:#555">#</span>{<span style="color:#fc3">:a</span> <span style="color:#fc3">:b</span> <span style="color:#fc3">:c</span> <span style="color:#fc3">:d</span>} (<span style="color:#366">set </span><span style="color:#555">&#39;</span>(<span style="color:#fc3">:a</span> <span style="color:#fc3">:a</span> <span style="color:#fc3">:b</span> <span style="color:#fc3">:c</span> <span style="color:#fc3">:c</span> <span style="color:#fc3">:c</span> <span style="color:#fc3">:c</span> <span style="color:#fc3">:d</span> <span style="color:#fc3">:d</span>)))
<span style="color:#033">true</span></code></pre></div>
<p>union関数はふたつのsetを合成するものかな。</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure"><span style="color:#033">user&gt;</span> (<span style="color:#033">clojure.set/union</span> <span style="color:#555">#</span>{<span style="color:#fc3">:a</span> <span style="color:#fc3">:b</span> <span style="color:#fc3">:c</span>} <span style="color:#555">#</span>{<span style="color:#fc3">:b</span> <span style="color:#fc3">:c</span> <span style="color:#fc3">:d</span>})
<span style="color:#555">#</span>{<span style="color:#fc3">:a</span> <span style="color:#fc3">:c</span> <span style="color:#fc3">:b</span> <span style="color:#fc3">:d</span>}</code></pre></div>
<h2 id="sets-conj-重要">Sets: conj【重要】</h2>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure">(<span style="color:#366">= </span><span style="color:#555">#</span>{<span style="color:#f60">1</span> <span style="color:#f60">2</span> <span style="color:#f60">3</span> <span style="color:#f60">4</span>} (<span style="color:#366">conj </span><span style="color:#555">#</span>{<span style="color:#f60">1</span> <span style="color:#f60">4</span> <span style="color:#f60">3</span>} <span style="color:#033">__</span>))</code></pre></div>
<p>試す。</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure"><span style="color:#033">user&gt;</span> (<span style="color:#366">conj </span><span style="color:#555">#</span>{<span style="color:#f60">1</span> <span style="color:#f60">4</span> <span style="color:#f60">3</span>} <span style="color:#555">#</span>{<span style="color:#f60">2</span> <span style="color:#f60">3</span> <span style="color:#f60">5</span>})
<span style="color:#555">#</span>{<span style="color:#f60">1</span> <span style="color:#f60">3</span> <span style="color:#f60">4</span> <span style="color:#555">#</span>{<span style="color:#f60">2</span> <span style="color:#f60">3</span> <span style="color:#f60">5</span>}}
<span style="color:#033">user&gt;</span> (<span style="color:#366">conj </span><span style="color:#555">#</span>{<span style="color:#f60">1</span> <span style="color:#f60">4</span> <span style="color:#f60">3</span>} <span style="color:#f60">2</span> <span style="color:#f60">3</span> <span style="color:#f60">5</span>)
<span style="color:#555">#</span>{<span style="color:#f60">1</span> <span style="color:#f60">2</span> <span style="color:#f60">3</span> <span style="color:#f60">4</span> <span style="color:#f60">5</span>}</code></pre></div>
<p>なるほど。理解した。setは中身がソートされるのね。</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure"><span style="color:#033">user&gt;</span> (<span style="color:#366">= </span><span style="color:#555">#</span>{<span style="color:#f60">1</span> <span style="color:#f60">2</span> <span style="color:#f60">3</span> <span style="color:#f60">4</span>} (<span style="color:#366">conj </span><span style="color:#555">#</span>{<span style="color:#f60">1</span> <span style="color:#f60">4</span> <span style="color:#f60">3</span>} <span style="color:#f60">2</span> <span style="color:#f60">3</span>))
<span style="color:#033">true</span></code></pre></div>
<h2 id="intro-to-maps">Intro to Maps</h2>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure">(<span style="color:#366">= </span><span style="color:#033">__</span> ((<span style="color:#366">hash-map </span><span style="color:#fc3">:a</span> <span style="color:#f60">10</span>, <span style="color:#fc3">:b</span> <span style="color:#f60">20</span>, <span style="color:#fc3">:c</span> <span style="color:#f60">30</span>) <span style="color:#fc3">:b</span>))
(<span style="color:#366">= </span><span style="color:#033">__</span> (<span style="color:#fc3">:b</span> {<span style="color:#fc3">:a</span> <span style="color:#f60">10</span>, <span style="color:#fc3">:b</span> <span style="color:#f60">20</span>, <span style="color:#fc3">:c</span> <span style="color:#f60">30</span>}))</code></pre></div><div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure"><span style="color:#033">user&gt;</span> (<span style="color:#366">= </span><span style="color:#f60">20</span> ((<span style="color:#366">hash-map </span><span style="color:#fc3">:a</span> <span style="color:#f60">10</span>, <span style="color:#fc3">:b</span> <span style="color:#f60">20</span>, <span style="color:#fc3">:c</span> <span style="color:#f60">30</span>) <span style="color:#fc3">:b</span>))
<span style="color:#033">true</span>
<span style="color:#033">user&gt;</span> (<span style="color:#366">= </span><span style="color:#f60">20</span> (<span style="color:#fc3">:b</span> {<span style="color:#fc3">:a</span> <span style="color:#f60">10</span>, <span style="color:#fc3">:b</span> <span style="color:#f60">20</span>, <span style="color:#fc3">:c</span> <span style="color:#f60">30</span>}))
<span style="color:#033">true</span></code></pre></div>
<h2 id="maps-conj">Maps: conj</h2>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure">(<span style="color:#366">= </span>{<span style="color:#fc3">:a</span> <span style="color:#f60">1</span>, <span style="color:#fc3">:b</span> <span style="color:#f60">2</span>, <span style="color:#fc3">:c</span> <span style="color:#f60">3</span>} (<span style="color:#366">conj </span>{<span style="color:#fc3">:a</span> <span style="color:#f60">1</span>} <span style="color:#033">__</span> [<span style="color:#fc3">:c</span> <span style="color:#f60">3</span>]))</code></pre></div>
<p>Mapにconjするにはキーと値のペアのベクタを渡す。</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure"><span style="color:#033">user&gt;</span> (<span style="color:#366">conj </span>{<span style="color:#fc3">:a</span> <span style="color:#f60">1</span>} [<span style="color:#fc3">:b</span> <span style="color:#f60">2</span>] [<span style="color:#fc3">:c</span> <span style="color:#f60">3</span>])
{<span style="color:#fc3">:c</span> <span style="color:#f60">3</span>, <span style="color:#fc3">:b</span> <span style="color:#f60">2</span>, <span style="color:#fc3">:a</span> <span style="color:#f60">1</span>}</code></pre></div>
<h2 id="intro-to-sequences">Intro to Sequences</h2>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure">(<span style="color:#366">= </span><span style="color:#033">__</span> (<span style="color:#366">first </span><span style="color:#555">&#39;</span>(<span style="color:#f60">3</span> <span style="color:#f60">2</span> <span style="color:#f60">1</span>)))
(<span style="color:#366">= </span><span style="color:#033">__</span> (<span style="color:#366">second </span>[<span style="color:#f60">2</span> <span style="color:#f60">3</span> <span style="color:#f60">4</span>]))
(<span style="color:#366">= </span><span style="color:#033">__</span> (<span style="color:#366">last </span>(<span style="color:#366">list </span><span style="color:#f60">1</span> <span style="color:#f60">2</span> <span style="color:#f60">3</span>)))</code></pre></div>
<h2 id="sequences-rest">Sequences: rest</h2>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure">(<span style="color:#366">= </span><span style="color:#033">__</span> (<span style="color:#366">rest </span>[<span style="color:#f60">10</span> <span style="color:#f60">20</span> <span style="color:#f60">30</span> <span style="color:#f60">40</span>]))</code></pre></div><div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure">(<span style="color:#366">= </span><span style="color:#555">&#39;</span>(<span style="color:#f60">20</span> <span style="color:#f60">30</span> <span style="color:#f60">40</span>) (<span style="color:#366">rest </span>[<span style="color:#f60">10</span> <span style="color:#f60">20</span> <span style="color:#f60">30</span> <span style="color:#f60">40</span>]))</code></pre></div>
<h2 id="intro-to-functions-重要">Intro to Functions【重要】</h2>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure">(<span style="color:#366">= </span><span style="color:#033">__</span> ((<span style="color:#069;font-weight:bold">fn </span><span style="color:#033">add-five</span> [<span style="color:#033">x</span>] (<span style="color:#366">+ </span><span style="color:#033">x</span> <span style="color:#f60">5</span>)) <span style="color:#f60">3</span>))
(<span style="color:#366">= </span><span style="color:#033">__</span> ((<span style="color:#069;font-weight:bold">fn </span>[<span style="color:#033">x</span>] (<span style="color:#366">+ </span><span style="color:#033">x</span> <span style="color:#f60">5</span>)) <span style="color:#f60">3</span>))
(<span style="color:#366">= </span><span style="color:#033">__</span> (<span style="color:#555">#</span>(<span style="color:#366">+ </span><span style="color:#033">%</span> <span style="color:#f60">5</span>) <span style="color:#f60">3</span>))
(<span style="color:#366">= </span><span style="color:#033">__</span> ((<span style="color:#366">partial + </span><span style="color:#f60">5</span>) <span style="color:#f60">3</span>))</code></pre></div>
<p>無名関数をカッコでくるむことで即時呼び出しされる。
partial関数ってなに？初見だ。</p>

<h2 id="double-down">Double Down</h2>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure"><span style="color:#033">Write</span> <span style="color:#033">a</span> <span style="color:#033">function</span> <span style="color:#033">which</span> <span style="color:#033">doubles</span> <span style="color:#033">a</span> <span style="color:#033">number.</span>
(<span style="color:#366">= </span>(<span style="color:#033">__</span> <span style="color:#f60">2</span>) <span style="color:#f60">4</span>)
(<span style="color:#366">= </span>(<span style="color:#033">__</span> <span style="color:#f60">3</span>) <span style="color:#f60">6</span>)
(<span style="color:#366">= </span>(<span style="color:#033">__</span> <span style="color:#f60">11</span>) <span style="color:#f60">22</span>)
(<span style="color:#366">= </span>(<span style="color:#033">__</span> <span style="color:#f60">7</span>) <span style="color:#f60">14</span>)</code></pre></div>
<p>答え</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure">(<span style="color:#366">= </span>(<span style="color:#555">#</span>(<span style="color:#366">* </span><span style="color:#f60">2</span> <span style="color:#033">%</span>) <span style="color:#f60">2</span>) <span style="color:#f60">4</span>)</code></pre></div>
<h2 id="hello-world">Hello World</h2>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure"><span style="color:#033">Write</span> <span style="color:#033">a</span> <span style="color:#033">function</span> <span style="color:#033">which</span> <span style="color:#033">returns</span> <span style="color:#033">a</span> <span style="color:#033">personalized</span> <span style="color:#033">greeting.</span>
(<span style="color:#366">= </span>(<span style="color:#033">__</span> <span style="color:#c30">&#34;Dave&#34;</span>) <span style="color:#c30">&#34;Hello, Dave!&#34;</span>)
(<span style="color:#366">= </span>(<span style="color:#033">__</span> <span style="color:#c30">&#34;Jenn&#34;</span>) <span style="color:#c30">&#34;Hello, Jenn!&#34;</span>)
(<span style="color:#366">= </span>(<span style="color:#033">__</span> <span style="color:#c30">&#34;Rhea&#34;</span>) <span style="color:#c30">&#34;Hello, Rhea!&#34;</span>)</code></pre></div>
<p>答</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure"><span style="color:#033">user&gt;</span> (<span style="color:#366">= </span>(<span style="color:#033">format</span> <span style="color:#c30">&#34;Hello, %s!&#34;</span> <span style="color:#c30">&#34;Rhea&#34;</span>) <span style="color:#c30">&#34;Hello, Rhea!&#34;</span>)
<span style="color:#033">true</span></code></pre></div>
<h2 id="sequences-map-重要">Sequences: map【重要】</h2>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure"><span style="color:#033">The</span> <span style="color:#366">map </span><span style="color:#033">function</span> <span style="color:#033">takes</span> <span style="color:#033">two</span> <span style="color:#033">arguments</span><span style="color:#a00;background-color:#faa">:</span> <span style="color:#033">a</span> <span style="color:#033">function</span> (<span style="color:#033">f</span>) <span style="color:#366">and </span><span style="color:#033">a</span> <span style="color:#033">sequence</span> (<span style="color:#033">s</span>)<span style="color:#033">.</span>
<span style="color:#033">Map</span> <span style="color:#033">returns</span> <span style="color:#033">a</span> <span style="color:#069;font-weight:bold">new </span><span style="color:#033">sequence</span> <span style="color:#033">consisting</span> <span style="color:#033">of</span> <span style="color:#033">the</span> <span style="color:#033">result</span> <span style="color:#033">of</span> <span style="color:#033">applying</span> <span style="color:#033">f</span> <span style="color:#033">to</span> <span style="color:#033">each</span> <span style="color:#033">item</span> <span style="color:#033">of</span> <span style="color:#033">s.</span>
<span style="color:#033">Do</span> <span style="color:#366">not </span><span style="color:#033">confuse</span> <span style="color:#033">the</span> <span style="color:#366">map </span><span style="color:#033">function</span> <span style="color:#033">with</span> <span style="color:#033">the</span> <span style="color:#366">map </span><span style="color:#033">data</span> <span style="color:#033">structure.</span>
(<span style="color:#366">= </span><span style="color:#033">__</span> (<span style="color:#366">map </span><span style="color:#555">#</span>(<span style="color:#366">+ </span><span style="color:#033">%</span> <span style="color:#f60">5</span>) <span style="color:#555">&#39;</span>(<span style="color:#f60">1</span> <span style="color:#f60">2</span> <span style="color:#f60">3</span>)))</code></pre></div>
<h2 id="sequences-filter-重要">Sequences: filter【重要】</h2>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure"><span style="color:#033">The</span> <span style="color:#366">filter </span><span style="color:#033">function</span> <span style="color:#033">takes</span> <span style="color:#033">two</span> <span style="color:#033">arguments</span><span style="color:#a00;background-color:#faa">:</span>
<span style="color:#033">a</span> <span style="color:#033">predicate</span> <span style="color:#033">function</span> (<span style="color:#033">f</span>) <span style="color:#366">and </span><span style="color:#033">a</span> <span style="color:#033">sequence</span> (<span style="color:#033">s</span>)<span style="color:#033">.</span>
<span style="color:#033">Filter</span> <span style="color:#033">returns</span> <span style="color:#033">a</span> <span style="color:#069;font-weight:bold">new </span><span style="color:#033">sequence</span> <span style="color:#033">consisting</span>
<span style="color:#033">of</span> <span style="color:#033">all</span> <span style="color:#033">the</span> <span style="color:#033">items</span> <span style="color:#033">of</span> <span style="color:#033">s</span> <span style="color:#366">for </span><span style="color:#033">which</span> (<span style="color:#033">f</span> <span style="color:#033">item</span>) <span style="color:#033">returns</span> <span style="color:#033">true.</span>

(<span style="color:#366">= </span><span style="color:#033">__</span> (<span style="color:#366">filter </span><span style="color:#555">#</span>(<span style="color:#366">&gt; </span><span style="color:#033">%</span> <span style="color:#f60">5</span>) <span style="color:#555">&#39;</span>(<span style="color:#f60">3</span> <span style="color:#f60">4</span> <span style="color:#f60">5</span> <span style="color:#f60">6</span> <span style="color:#f60">7</span>)))</code></pre></div>
<h2 id="35-local-bindings">#35 Local bindings</h2>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure"><span style="color:#033">Difficulty</span><span style="color:#a00;background-color:#faa">:</span> <span style="color:#033">Elementary</span>
<span style="color:#033">Topics</span><span style="color:#a00;background-color:#faa">:</span> <span style="color:#033">syntax</span>


<span style="color:#033">Clojure</span> <span style="color:#033">lets</span> <span style="color:#033">you</span> <span style="color:#033">give</span> <span style="color:#033">local</span> <span style="color:#033">names</span> <span style="color:#033">to</span> <span style="color:#033">values</span> <span style="color:#033">using</span> <span style="color:#033">the</span> <span style="color:#033">special</span> <span style="color:#033">let-form.</span>
<span style="color:#366">test not </span><span style="color:#033">run</span>
(<span style="color:#366">= </span><span style="color:#033">__</span> (<span style="color:#069;font-weight:bold">let </span>[<span style="color:#033">x</span> <span style="color:#f60">5</span>] (<span style="color:#366">+ </span><span style="color:#f60">2</span> <span style="color:#033">x</span>)))
<span style="color:#366">test not </span><span style="color:#033">run</span>
(<span style="color:#366">= </span><span style="color:#033">__</span> (<span style="color:#069;font-weight:bold">let </span>[<span style="color:#033">x</span> <span style="color:#f60">3</span>, <span style="color:#033">y</span> <span style="color:#f60">10</span>] (<span style="color:#366">- </span><span style="color:#033">y</span> <span style="color:#033">x</span>)))
<span style="color:#366">test not </span><span style="color:#033">run</span>
(<span style="color:#366">= </span><span style="color:#033">__</span> (<span style="color:#069;font-weight:bold">let </span>[<span style="color:#033">x</span> <span style="color:#f60">21</span>] (<span style="color:#069;font-weight:bold">let </span>[<span style="color:#033">y</span> <span style="color:#f60">3</span>] (<span style="color:#366">/ </span><span style="color:#033">x</span> <span style="color:#033">y</span>))))</code></pre></div>
<h2 id="37-regular-expressions">#37 Regular Expressions</h2>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure"><span style="color:#033">Difficulty</span><span style="color:#a00;background-color:#faa">:</span> <span style="color:#033">Elementary</span>
<span style="color:#033">Topics</span><span style="color:#a00;background-color:#faa">:</span> <span style="color:#033">regex</span> <span style="color:#033">syntax</span>

<span style="color:#033">Regex</span> <span style="color:#033">patterns</span> <span style="color:#033">are</span> <span style="color:#033">supported</span> <span style="color:#033">with</span> <span style="color:#033">a</span> <span style="color:#033">special</span> <span style="color:#033">reader</span> <span style="color:#033">macro.</span>
<span style="color:#366">test not </span><span style="color:#033">run</span>
(<span style="color:#366">= </span><span style="color:#033">__</span> (<span style="color:#366">apply str </span>(<span style="color:#366">re-seq </span><span style="color:#555">#</span><span style="color:#c30">&#34;[A-Z]+&#34;</span> <span style="color:#c30">&#34;bA1B3Ce &#34;</span>)))</code></pre></div><div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure"><span style="color:#033">user&gt;</span> (<span style="color:#366">= </span><span style="color:#c30">&#34;ABC&#34;</span> (<span style="color:#366">apply str </span>(<span style="color:#366">re-seq </span><span style="color:#555">#</span><span style="color:#c30">&#34;[A-Z]+&#34;</span> <span style="color:#c30">&#34;bA1B3Ce &#34;</span>)))
<span style="color:#033">true</span></code></pre></div>
<h2 id="64-intro-to-reduce">#64 Intro to Reduce</h2>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure"><span style="color:#033">Difficulty</span><span style="color:#a00;background-color:#faa">:</span> <span style="color:#033">Elementary</span>
<span style="color:#033">Topics</span><span style="color:#a00;background-color:#faa">:</span> <span style="color:#033">seqs</span>

<span style="color:#033">Reduce</span> <span style="color:#033">takes</span> <span style="color:#033">a</span> <span style="color:#f60">2</span> <span style="color:#033">argument</span> <span style="color:#033">function</span> <span style="color:#366">and </span><span style="color:#033">an</span> <span style="color:#033">optional</span> <span style="color:#033">starting</span> <span style="color:#033">value.</span>
<span style="color:#033">It</span> <span style="color:#033">then</span> <span style="color:#033">applies</span> <span style="color:#033">the</span> <span style="color:#033">function</span> <span style="color:#033">to</span> <span style="color:#033">the</span> <span style="color:#366">first </span><span style="color:#f60">2</span> <span style="color:#033">items</span> <span style="color:#033">in</span> <span style="color:#033">the</span> <span style="color:#033">sequence</span>
(<span style="color:#366">or </span><span style="color:#033">the</span> <span style="color:#033">starting</span> <span style="color:#033">value</span> <span style="color:#366">and </span><span style="color:#033">the</span> <span style="color:#366">first </span><span style="color:#033">element</span> <span style="color:#033">of</span> <span style="color:#033">the</span> <span style="color:#033">sequence</span>)<span style="color:#033">.</span>
<span style="color:#033">In</span> <span style="color:#033">the</span> <span style="color:#366">next </span><span style="color:#033">iteration</span> <span style="color:#033">the</span> <span style="color:#033">function</span> <span style="color:#033">will</span> <span style="color:#033">be</span> <span style="color:#033">called</span>
 <span style="color:#033">on</span> <span style="color:#033">the</span> <span style="color:#033">previous</span> <span style="color:#033">return</span> <span style="color:#033">value</span> <span style="color:#366">and </span><span style="color:#033">the</span> <span style="color:#366">next </span><span style="color:#033">item</span> <span style="color:#033">from</span> <span style="color:#033">the</span> <span style="color:#033">sequence</span>,
 <span style="color:#033">thus</span> <span style="color:#033">reducing</span> <span style="color:#033">the</span> <span style="color:#033">entire</span> <span style="color:#033">collection</span> <span style="color:#033">to</span> <span style="color:#033">one</span> <span style="color:#033">value.</span>
 <span style="color:#033">Don</span><span style="color:#fc3">&#39;t</span> <span style="color:#033">worry</span>, <span style="color:#033">it</span><span style="color:#fc3">&#39;s</span> <span style="color:#366">not </span><span style="color:#033">as</span> <span style="color:#033">complicated</span> <span style="color:#033">as</span> <span style="color:#033">it</span> <span style="color:#033">sounds.</span>
(<span style="color:#366">= </span><span style="color:#f60">15</span> (<span style="color:#366">reduce </span><span style="color:#033">__</span> [<span style="color:#f60">1</span> <span style="color:#f60">2</span> <span style="color:#f60">3</span> <span style="color:#f60">4</span> <span style="color:#f60">5</span>]))
(<span style="color:#366">= </span> <span style="color:#f60">0</span> (<span style="color:#366">reduce </span><span style="color:#033">__</span> []))
(<span style="color:#366">= </span> <span style="color:#f60">6</span> (<span style="color:#366">reduce </span><span style="color:#033">__</span> <span style="color:#f60">1</span> [<span style="color:#f60">2</span> <span style="color:#f60">3</span>]))</code></pre></div><div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure"><span style="color:#033">user&gt;</span> (<span style="color:#366">= </span><span style="color:#f60">15</span> (<span style="color:#366">reduce + </span>[<span style="color:#f60">1</span> <span style="color:#f60">2</span> <span style="color:#f60">3</span> <span style="color:#f60">4</span> <span style="color:#f60">5</span>]))
<span style="color:#033">true</span></code></pre></div>
<h2 id="57-simple-recursion-難しい">#57 Simple Recursion【難しい】</h2>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure"><span style="color:#033">Difficulty</span><span style="color:#a00;background-color:#faa">:</span> <span style="color:#033">Elementary</span>
<span style="color:#033">Topics</span><span style="color:#a00;background-color:#faa">:</span> <span style="color:#033">recursion</span>

<span style="color:#033">A</span> <span style="color:#033">recursive</span> <span style="color:#033">function</span> <span style="color:#033">is</span> <span style="color:#033">a</span> <span style="color:#033">function</span> <span style="color:#033">which</span> <span style="color:#033">calls</span> <span style="color:#033">itself.</span>
<span style="color:#033">This</span> <span style="color:#033">is</span> <span style="color:#033">one</span> <span style="color:#033">of</span> <span style="color:#033">the</span> <span style="color:#033">fundamental</span> <span style="color:#033">techniques</span> <span style="color:#033">used</span> <span style="color:#033">in</span> <span style="color:#033">functional</span> <span style="color:#033">programming.</span>
(<span style="color:#366">= </span><span style="color:#033">__</span>
  ((<span style="color:#069;font-weight:bold">fn </span><span style="color:#033">foo</span> [<span style="color:#033">x</span>]
    (<span style="color:#366">when </span>(<span style="color:#366">&gt; </span><span style="color:#033">x</span> <span style="color:#f60">0</span>)
      (<span style="color:#366">conj </span>(<span style="color:#033">foo</span> (<span style="color:#366">dec </span><span style="color:#033">x</span>)) <span style="color:#033">x</span>)))
    <span style="color:#f60">5</span>))</code></pre></div><div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure"><span style="color:#033">user&gt;</span> (<span style="color:#366">= </span><span style="color:#555">&#39;</span>(<span style="color:#f60">5</span> <span style="color:#f60">4</span> <span style="color:#f60">3</span> <span style="color:#f60">2</span> <span style="color:#f60">1</span>) ((<span style="color:#069;font-weight:bold">fn </span><span style="color:#033">foo</span> [<span style="color:#033">x</span>] (<span style="color:#366">when </span>(<span style="color:#366">&gt; </span><span style="color:#033">x</span> <span style="color:#f60">0</span>) (<span style="color:#366">conj </span>(<span style="color:#033">foo</span> (<span style="color:#366">dec </span><span style="color:#033">x</span>)) <span style="color:#033">x</span>))) <span style="color:#f60">5</span>))
<span style="color:#033">true</span></code></pre></div>
<h2 id="s-71-rearranging-code-重要">S#71 Rearranging Code: -&gt;【重要】</h2>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure"><span style="color:#033">Difficulty</span><span style="color:#a00;background-color:#faa">:</span> <span style="color:#033">Elementary</span>
<span style="color:#033">Topics</span><span style="color:#a00;background-color:#faa">:</span>

<span style="color:#033">The</span> <span style="color:#366">-&gt; </span><span style="color:#033">macro</span> <span style="color:#033">threads</span> <span style="color:#033">an</span> <span style="color:#033">expression</span> <span style="color:#033">x</span> <span style="color:#033">through</span> <span style="color:#033">a</span> <span style="color:#033">variable</span> <span style="color:#033">number</span> <span style="color:#033">of</span> <span style="color:#033">forms.</span>
<span style="color:#033">First</span>, <span style="color:#033">x</span> <span style="color:#033">is</span> <span style="color:#033">inserted</span> <span style="color:#033">as</span> <span style="color:#033">the</span> <span style="color:#366">second </span><span style="color:#033">item</span> <span style="color:#033">in</span> <span style="color:#033">the</span> <span style="color:#366">first </span><span style="color:#033">form</span>,
 <span style="color:#033">making</span> <span style="color:#033">a</span> <span style="color:#366">list </span><span style="color:#033">of</span> <span style="color:#033">it</span> <span style="color:#069;font-weight:bold">if </span><span style="color:#033">it</span> <span style="color:#033">is</span> <span style="color:#366">not </span><span style="color:#033">a</span> <span style="color:#366">list </span><span style="color:#033">already.</span>
<span style="color:#033">Then</span> <span style="color:#033">the</span> <span style="color:#366">first </span><span style="color:#033">form</span> <span style="color:#033">is</span> <span style="color:#033">inserted</span> <span style="color:#033">as</span> <span style="color:#033">the</span> <span style="color:#366">second </span><span style="color:#033">item</span> <span style="color:#033">in</span> <span style="color:#033">the</span> <span style="color:#366">second </span><span style="color:#033">form</span>,
<span style="color:#033">making</span> <span style="color:#033">a</span> <span style="color:#366">list </span><span style="color:#033">of</span> <span style="color:#033">that</span> <span style="color:#033">form</span> <span style="color:#069;font-weight:bold">if </span><span style="color:#033">necessary.</span>
<span style="color:#033">This</span> <span style="color:#033">process</span> <span style="color:#033">continues</span> <span style="color:#366">for </span><span style="color:#033">all</span> <span style="color:#033">the</span> <span style="color:#033">forms.</span>
<span style="color:#033">Using</span> <span style="color:#366">-&gt; </span><span style="color:#033">can</span> <span style="color:#033">sometimes</span> <span style="color:#033">make</span> <span style="color:#033">your</span> <span style="color:#033">code</span> <span style="color:#033">more</span> <span style="color:#033">readable.</span>

(<span style="color:#366">= </span>(<span style="color:#033">__</span> (<span style="color:#366">sort </span>(<span style="color:#366">rest </span>(<span style="color:#366">reverse </span>[<span style="color:#f60">2</span> <span style="color:#f60">5</span> <span style="color:#f60">4</span> <span style="color:#f60">1</span> <span style="color:#f60">3</span> <span style="color:#f60">6</span>]))))
   (<span style="color:#366">-&gt; </span>[<span style="color:#f60">2</span> <span style="color:#f60">5</span> <span style="color:#f60">4</span> <span style="color:#f60">1</span> <span style="color:#f60">3</span> <span style="color:#f60">6</span>] <span style="color:#366">reverse rest sort </span><span style="color:#033">__</span>)
   <span style="color:#f60">5</span>)</code></pre></div><div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure">(<span style="color:#366">= </span>(<span style="color:#366">last </span>(<span style="color:#366">sort </span>(<span style="color:#366">rest </span>(<span style="color:#366">reverse </span>[<span style="color:#f60">2</span> <span style="color:#f60">5</span> <span style="color:#f60">4</span> <span style="color:#f60">1</span> <span style="color:#f60">3</span> <span style="color:#f60">6</span>]))))
   (<span style="color:#366">-&gt; </span>[<span style="color:#f60">2</span> <span style="color:#f60">5</span> <span style="color:#f60">4</span> <span style="color:#f60">1</span> <span style="color:#f60">3</span> <span style="color:#f60">6</span>] <span style="color:#366">reverse rest sort </span><span style="color:#033">last</span>)
   <span style="color:#f60">5</span>)</code></pre></div>
<h2 id="68-recurring-theme">#68 Recurring Theme</h2>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure"><span style="color:#033">Difficulty</span><span style="color:#a00;background-color:#faa">:</span> <span style="color:#033">Elementary</span>
<span style="color:#033">Topics</span><span style="color:#a00;background-color:#faa">:</span> <span style="color:#033">recursion</span>

<span style="color:#033">Clojure</span> <span style="color:#033">only</span> <span style="color:#033">has</span> <span style="color:#033">one</span> <span style="color:#033">non-stack-consuming</span> <span style="color:#033">looping</span> <span style="color:#033">construct</span><span style="color:#a00;background-color:#faa">:</span> <span style="color:#033">recur.</span>
<span style="color:#033">Either</span> <span style="color:#033">a</span> <span style="color:#033">function</span> <span style="color:#366">or </span><span style="color:#033">a</span> <span style="color:#069;font-weight:bold">loop </span><span style="color:#033">can</span> <span style="color:#033">be</span> <span style="color:#033">used</span> <span style="color:#033">as</span> <span style="color:#033">the</span> <span style="color:#033">recursion</span> <span style="color:#033">point.</span>
<span style="color:#033">Either</span> <span style="color:#033">way</span>, <span style="color:#033">recur</span> <span style="color:#033">rebinds</span> <span style="color:#033">the</span> <span style="color:#033">bindings</span> <span style="color:#033">of</span> <span style="color:#033">the</span> <span style="color:#033">recursion</span> <span style="color:#033">point</span> <span style="color:#033">to</span> <span style="color:#033">the</span> <span style="color:#033">values</span> <span style="color:#033">it</span> <span style="color:#033">is</span> <span style="color:#033">passed.</span>
<span style="color:#033">Recur</span> <span style="color:#033">must</span> <span style="color:#033">be</span> <span style="color:#033">called</span> <span style="color:#033">from</span> <span style="color:#033">the</span> <span style="color:#033">tail-position</span>, <span style="color:#366">and </span><span style="color:#033">calling</span> <span style="color:#033">it</span> <span style="color:#033">elsewhere</span> <span style="color:#033">will</span> <span style="color:#033">result</span> <span style="color:#033">in</span> <span style="color:#033">an</span> <span style="color:#033">error.</span>

(<span style="color:#366">= </span><span style="color:#033">__</span>
  (<span style="color:#069;font-weight:bold">loop </span>[<span style="color:#033">x</span> <span style="color:#f60">5</span>
         <span style="color:#033">result</span> []]
    (<span style="color:#069;font-weight:bold">if </span>(<span style="color:#366">&gt; </span><span style="color:#033">x</span> <span style="color:#f60">0</span>)
      (<span style="color:#033">recur</span> (<span style="color:#366">dec </span><span style="color:#033">x</span>) (<span style="color:#366">conj </span><span style="color:#033">result</span> (<span style="color:#366">+ </span><span style="color:#f60">2</span> <span style="color:#033">x</span>)))
      <span style="color:#033">result</span>)))</code></pre></div>
<h2 id="s-72-rearranging-code-重要">S#72 Rearranging Code: -&gt;&gt;【重要】</h2>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure"><span style="color:#033">Difficulty</span><span style="color:#a00;background-color:#faa">:</span> <span style="color:#033">Elementary</span>
<span style="color:#033">Topics</span><span style="color:#a00;background-color:#faa">:</span>


<span style="color:#033">The</span> <span style="color:#033">-&gt;&gt;</span> <span style="color:#033">macro</span> <span style="color:#033">threads</span> <span style="color:#033">an</span> <span style="color:#033">expression</span> <span style="color:#033">x</span> <span style="color:#033">through</span> <span style="color:#033">a</span> <span style="color:#033">variable</span> <span style="color:#033">number</span> <span style="color:#033">of</span> <span style="color:#033">forms.</span> <span style="color:#033">First</span>, <span style="color:#033">x</span> <span style="color:#033">is</span> <span style="color:#033">inserted</span> <span style="color:#033">as</span> <span style="color:#033">the</span> <span style="color:#366">last </span><span style="color:#033">item</span> <span style="color:#033">in</span> <span style="color:#033">the</span> <span style="color:#366">first </span><span style="color:#033">form</span>, <span style="color:#033">making</span> <span style="color:#033">a</span> <span style="color:#366">list </span><span style="color:#033">of</span> <span style="color:#033">it</span> <span style="color:#069;font-weight:bold">if </span><span style="color:#033">it</span> <span style="color:#033">is</span> <span style="color:#366">not </span><span style="color:#033">a</span> <span style="color:#366">list </span><span style="color:#033">already.</span> <span style="color:#033">Then</span> <span style="color:#033">the</span> <span style="color:#366">first </span><span style="color:#033">form</span> <span style="color:#033">is</span> <span style="color:#033">inserted</span> <span style="color:#033">as</span> <span style="color:#033">the</span> <span style="color:#366">last </span><span style="color:#033">item</span> <span style="color:#033">in</span> <span style="color:#033">the</span> <span style="color:#366">second </span><span style="color:#033">form</span>, <span style="color:#033">making</span> <span style="color:#033">a</span> <span style="color:#366">list </span><span style="color:#033">of</span> <span style="color:#033">that</span> <span style="color:#033">form</span> <span style="color:#069;font-weight:bold">if </span><span style="color:#033">necessary.</span> <span style="color:#033">This</span> <span style="color:#033">process</span> <span style="color:#033">continues</span> <span style="color:#366">for </span><span style="color:#033">all</span> <span style="color:#033">the</span> <span style="color:#033">forms.</span> <span style="color:#033">Using</span> <span style="color:#033">-&gt;&gt;</span> <span style="color:#033">can</span> <span style="color:#033">sometimes</span> <span style="color:#033">make</span> <span style="color:#033">your</span> <span style="color:#033">code</span> <span style="color:#033">more</span> <span style="color:#033">readable.</span>
<span style="color:#366">test not </span><span style="color:#033">run</span>
(<span style="color:#366">= </span>(<span style="color:#033">__</span> (<span style="color:#366">map inc </span>(<span style="color:#366">take </span><span style="color:#f60">3</span> (<span style="color:#366">drop </span><span style="color:#f60">2</span> [<span style="color:#f60">2</span> <span style="color:#f60">5</span> <span style="color:#f60">4</span> <span style="color:#f60">1</span> <span style="color:#f60">3</span> <span style="color:#f60">6</span>]))))
   (<span style="color:#033">-&gt;&gt;</span> [<span style="color:#f60">2</span> <span style="color:#f60">5</span> <span style="color:#f60">4</span> <span style="color:#f60">1</span> <span style="color:#f60">3</span> <span style="color:#f60">6</span>] (<span style="color:#366">drop </span><span style="color:#f60">2</span>) (<span style="color:#366">take </span><span style="color:#f60">3</span>) (<span style="color:#366">map </span><span style="color:#033">inc</span>) (<span style="color:#033">__</span>))
   <span style="color:#f60">11</span>)</code></pre></div>
<p>こたえ</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure">(<span style="color:#366">= </span>(<span style="color:#366">apply + </span>(<span style="color:#366">map inc </span>(<span style="color:#366">take </span><span style="color:#f60">3</span> (<span style="color:#366">drop </span><span style="color:#f60">2</span> [<span style="color:#f60">2</span> <span style="color:#f60">5</span> <span style="color:#f60">4</span> <span style="color:#f60">1</span> <span style="color:#f60">3</span> <span style="color:#f60">6</span>]))))
   (<span style="color:#033">-&gt;&gt;</span> [<span style="color:#f60">2</span> <span style="color:#f60">5</span> <span style="color:#f60">4</span> <span style="color:#f60">1</span> <span style="color:#f60">3</span> <span style="color:#f60">6</span>] (<span style="color:#366">drop </span><span style="color:#f60">2</span>) (<span style="color:#366">take </span><span style="color:#f60">3</span>) (<span style="color:#366">map </span><span style="color:#033">inc</span>) (<span style="color:#366">apply </span><span style="color:#033">+</span>))
   <span style="color:#f60">11</span>)</code></pre></div>
<h2 id="last-element-難しい">Last Element【難しい】</h2>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure"><span style="color:#033">Difficulty</span><span style="color:#a00;background-color:#faa">:</span> <span style="color:#033">Easy</span>
<span style="color:#033">Topics</span><span style="color:#a00;background-color:#faa">:</span> <span style="color:#033">seqs</span> <span style="color:#033">core-functions</span>

<span style="color:#033">Write</span> <span style="color:#033">a</span> <span style="color:#033">function</span> <span style="color:#033">which</span> <span style="color:#033">returns</span> <span style="color:#033">the</span> <span style="color:#366">last </span><span style="color:#033">element</span> <span style="color:#033">in</span> <span style="color:#033">a</span> <span style="color:#033">sequence.</span>
(<span style="color:#366">= </span>(<span style="color:#033">__</span> [<span style="color:#f60">1</span> <span style="color:#f60">2</span> <span style="color:#f60">3</span> <span style="color:#f60">4</span> <span style="color:#f60">5</span>]) <span style="color:#f60">5</span>)
(<span style="color:#366">= </span>(<span style="color:#033">__</span> <span style="color:#555">&#39;</span>(<span style="color:#f60">5</span> <span style="color:#f60">4</span> <span style="color:#f60">3</span>)) <span style="color:#f60">3</span>)
(<span style="color:#366">= </span>(<span style="color:#033">__</span> [<span style="color:#c30">&#34;b&#34;</span> <span style="color:#c30">&#34;c&#34;</span> <span style="color:#c30">&#34;d&#34;</span>]) <span style="color:#c30">&#34;d&#34;</span>)</code></pre></div>
<p>lastは使っちゃダメらしい。</p>

<p>難しい。ここみてカンニング。。。
<a href="http://stackoverflow.com/questions/8264881/clojure-find-last-element-without-using-last-function">http://stackoverflow.com/questions/8264881/clojure-find-last-element-without-using-last-function</a></p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure"><span style="color:#033">user&gt;</span> (<span style="color:#366">= </span>(<span style="color:#555">#</span>(<span style="color:#366">first </span>(<span style="color:#366">reverse </span><span style="color:#033">%</span>)) <span style="color:#555">&#39;</span>(<span style="color:#f60">5</span> <span style="color:#f60">4</span> <span style="color:#f60">3</span>)) <span style="color:#f60">3</span>)
<span style="color:#033">true</span></code></pre></div>
<p>無名関数を使い、さらに即時呼出するとか。絶対おもいつかん。。。</p>

<h2 id="20-penultimate-element-難しい">#20 Penultimate Element【難しい】</h2>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure"><span style="color:#033">Difficulty</span><span style="color:#a00;background-color:#faa">:</span> <span style="color:#033">Easy</span>
<span style="color:#033">Topics</span><span style="color:#a00;background-color:#faa">:</span> <span style="color:#033">seqs</span>

<span style="color:#033">Write</span> <span style="color:#033">a</span> <span style="color:#033">function</span> <span style="color:#033">which</span> <span style="color:#033">returns</span> <span style="color:#033">the</span> <span style="color:#366">second </span><span style="color:#033">to</span> <span style="color:#366">last </span><span style="color:#033">element</span> <span style="color:#033">from</span> <span style="color:#033">a</span> <span style="color:#033">sequence.</span>

(<span style="color:#366">= </span>(<span style="color:#033">__</span> (<span style="color:#366">list </span><span style="color:#f60">1</span> <span style="color:#f60">2</span> <span style="color:#f60">3</span> <span style="color:#f60">4</span> <span style="color:#f60">5</span>)) <span style="color:#f60">4</span>)
(<span style="color:#366">= </span>(<span style="color:#033">__</span> [<span style="color:#c30">&#34;a&#34;</span> <span style="color:#c30">&#34;b&#34;</span> <span style="color:#c30">&#34;c&#34;</span>]) <span style="color:#c30">&#34;b&#34;</span>)
(<span style="color:#366">= </span>(<span style="color:#033">__</span> [[<span style="color:#f60">1</span> <span style="color:#f60">2</span>] [<span style="color:#f60">3</span> <span style="color:#f60">4</span>]]) [<span style="color:#f60">1</span> <span style="color:#f60">2</span>])</code></pre></div>
<p>先の問題にあった「Last Element」と同じ。</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure"><span style="color:#033">user&gt;</span> (<span style="color:#366">= </span>(<span style="color:#555">#</span>(<span style="color:#366">second </span>(<span style="color:#366">reverse </span><span style="color:#033">%</span>)) (<span style="color:#366">list </span><span style="color:#f60">1</span> <span style="color:#f60">2</span> <span style="color:#f60">3</span> <span style="color:#f60">4</span> <span style="color:#f60">5</span>)) <span style="color:#f60">4</span>)
<span style="color:#033">true</span>
<span style="color:#033">user&gt;</span> (<span style="color:#366">= </span>(<span style="color:#555">#</span>(<span style="color:#366">second </span>(<span style="color:#366">reverse </span><span style="color:#033">%</span>)) [<span style="color:#c30">&#34;a&#34;</span> <span style="color:#c30">&#34;b&#34;</span> <span style="color:#c30">&#34;c&#34;</span>]) <span style="color:#c30">&#34;b&#34;</span>)
<span style="color:#033">true</span>
<span style="color:#033">user&gt;</span> (<span style="color:#366">= </span>(<span style="color:#555">#</span>(<span style="color:#366">second </span>(<span style="color:#366">reverse </span><span style="color:#033">%</span>)) [[<span style="color:#f60">1</span> <span style="color:#f60">2</span>] [<span style="color:#f60">3</span> <span style="color:#f60">4</span>]]) [<span style="color:#f60">1</span> <span style="color:#f60">2</span>])
<span style="color:#033">true</span></code></pre></div>
<h2 id="21-nth-element-難しい">#21 Nth Element【難しい】</h2>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">Nth Element
Difficulty:Easy
Topics:seqs core-functions
Write a function which returns the Nth element from a sequence.
Special Restrictions
nth</code></pre></div><div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure">(<span style="color:#366">= </span>(<span style="color:#033">__</span> <span style="color:#555">&#39;</span>(<span style="color:#f60">4</span> <span style="color:#f60">5</span> <span style="color:#f60">6</span> <span style="color:#f60">7</span>) <span style="color:#f60">2</span>) <span style="color:#f60">6</span>)
(<span style="color:#366">= </span>(<span style="color:#033">__</span> [<span style="color:#fc3">:a</span> <span style="color:#fc3">:b</span> <span style="color:#fc3">:c</span>] <span style="color:#f60">0</span>) <span style="color:#fc3">:a</span>)
(<span style="color:#366">= </span>(<span style="color:#033">__</span> [<span style="color:#f60">1</span> <span style="color:#f60">2</span> <span style="color:#f60">3</span> <span style="color:#f60">4</span>] <span style="color:#f60">1</span>) <span style="color:#f60">2</span>)
(<span style="color:#366">= </span>(<span style="color:#033">__</span> <span style="color:#555">&#39;</span>([<span style="color:#f60">1</span> <span style="color:#f60">2</span>] [<span style="color:#f60">3</span> <span style="color:#f60">4</span>] [<span style="color:#f60">5</span> <span style="color:#f60">6</span>]) <span style="color:#f60">2</span>) [<span style="color:#f60">5</span> <span style="color:#f60">6</span>])</code></pre></div>
<p>Special Restrictions nth とあるのでnthが使えないので難しい。無名関数を駆使しないと溶けない。</p>

        </article>
  </div>
  <hr>
    <div>
        
          <a class="previous" href="https://zarudama.github.io/post/2014/05/libgdx_emacs/"> Emacs JDEE でlibGDXプログラミング!</a>
        
        
          <a class="next" href="https://zarudama.github.io/post/2014/06/cygwin_apt_cyg/"> apt-cygがうまくいかなくなった。</a>
        
    </div>
</section>

                </div>
            </div></div>
        <script src="/js/ui.js"></script>
    </body>
</html>
